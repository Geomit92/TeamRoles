
@using System.Web.Mvc.Html
@using Microsoft.AspNet.Identity.EntityFramework
@using TeamRoles.Models
@model IEnumerable<TeamRoles.Models.Course>


<div class="container">

    <!------- CREATE COURSE BUTTON -------------->
    <div class="row">
        <div class="col-lg-12 text-center">
            @if (User.IsInRole("Teacher"))
            {
                @Html.Partial("_Create", new ViewDataDictionary<Course>())
            }
        </div>
    </div>

    <div class="row">

        @if (Model.Count() != 0)
        {
            <div class="card-deck ">

                @foreach (var item in Model)
                {
                    <div class="txt-center">
                        <div class="card" style="width: 250px; height: 450px; padding: 15px; margin: 15px">
                            
                            <img src="~/Users/@item.Teacher.UserName/@item.CourseName/@Url.Content(item.CoursePic)" class="card-img-top" height="200" width="200" style="object-fit: contain" alt="...">

                            <div class="card-body">

                                <h5 class="card-title">@item.CourseName</h5>

                                <p class="card-text">@item.CourseDescription</p>

                            </div>
                            <div class="card-footer">
                                @Html.AntiForgeryToken()

                                @if (!User.IsInRole("Teacher"))
                                {
                                    <a href="/Courses/CourseHome/@item.CourseId"><i class="fas fa-info-circle fa-2x"></i></a>
                                }
                                else
                                {
                                    @Html.Partial("_Edit", new ViewDataDictionary(this.Model.Where(i => i.CourseId == item.CourseId).SingleOrDefault()) { { "id", item.CourseId } }) 
                                    <a href="/Courses/CourseHome/@item.CourseId"><i class="fas fa-info-circle fa-2x"></i></a>
                                    <a href="/Courses/Delete/@item.CourseId" onclick="return confirm('Are you sure, do you want to delete this ?')"><i class="fas fa-trash-alt fa-2x"></i></a>

                                }

                            </div>
                        </div>
                    </div>

                }
            </div>
        }
        else
        {
            <h2>There are no Courses!</h2>
        }

    </div>

    <a href="/Home/Index">Back to Home</a>
</div>


